---
layout: post
title: 我们需要怎样的前端框架
categories: [front-end, framework]
tags: [Fine]
---


fdev4（中文站第四代前端基础框架）诞生至今已近两年，也日渐稳定。现在，是该考虑fdev5了。当然，不能为了fdev5而fdev5。在经历从fdev3到fdev4的巨大迁移成本之后（近两年，现在仍然有不少基于fdev3的老代码需要维护），fdev4到fdev5不可以再这么剧烈的分裂（fdev3和fdev4共存自是没问题，但一个页面存在两个基础库总是不妥的），没时间，也没精力。fdev4很好的提供了组件和解决浏览器兼容问题，fdev5的目标自不在此了

撇开fdev4，先讲讲期望的前端基础框架

第一，统一的书写格式。前端语言都是很自由的，同一个功能或页面，一千位前端同学来写，可能就有一千种结果，尽管在浏览器表现出来相差无几，但即使实现思路是一样的，而所含的思维模式也许南辕北辙。作为一个团队，一个网站，势必需要自己的代码风格，利于协作，便于维护。代码风格仅仅包含常见的style guide是不足够的。行业线两年多的实践表明，一致的书写格式对于后期维护他人维护是非常有利处的。尤其现在很多后端同学参与前端开发，对其质量的把控，快速入门的引导，若存在一个固定的书写格式，无往而不利，旺铺线一年多的实践便是最好的证明。前端语言没有提供相对固定的书写格式，那么我们自己来提供

第二，前端语言的统一考量。JS类库，顾名思义，不会考虑HTML和CSS的。框架中，贤如YUI者，CSS也只有reset、fonts、grids之属，其他CSS则和HTML一样只是在JS需要时出现，是否能这么理解：HTML和CSS是为JS服务的，不说从属关系，至少是不平等的。而对于业务代码中的HTML和CSS的书写，帮助作用是极其有限的

第三，模块化。模块化的好处就不讲了，谁用谁知道。在前两点的基础之上，在基础框架层面有所约束，使得模块化成为习惯

第四，常见情况的解决方案。除了DOM、事件等核心，以及寻常的utility、widget之外，也应该包含一般场景的可能解决思路，这在前端代码日益复杂的前提下，更为有用

接着讲讲fdev4的不足

第一，jQuery升级麻烦。现在jQuery整体被merge在fdev4中，要想升级，必须全站一次性升级。虽说大部分情况下jQuery升级改动的api并不会太多，但若想安心的升级，必须得保证所有的代码不出问题，公共的代码倒还好办，业务代码就难办了，即使跑了自动化测试，也根本无法覆盖

第二，囿于jQuery。前端技术日新月异的，虽说自己工作之余能多关注多尝试，可一旦忙起来，根本无暇顾及。在生活中学习固然不错，可生活不能全跟工作相关，若能在工作中也涉及到一些，岂非更好

第三，混淆了jQuery。最初设计fdev4的时候，没有考虑清楚，将不少方法直接扩展在jQuery这个全局变量上，很容易使得不熟悉的同学很难区分方法到底是jQuery的方法还是fdev4扩展上去的

第四，组件的划分不够清楚或混乱。好吧，最初设计时算是清晰的，只是后来加组件时就放置的不那么符合原意了。当然，这也怪没有将原意告知大家，在添加时也不够关注。其实fdev4核心部分也是划分的不够恰当

第五，就是缺上述四点期望

那么，fdev5该怎么设计呢？是否解决以上问题就够了呢？

再来看看我们的网站，我一直说中文站不是一个网站，而是一系列网站，差不多一条产品线就是一个网站。不提视觉层风格迥异，信息架构上也多有不同

面对如此复杂的一系列网站，我想，仅靠一个基础框架是不够的，每条或数条相近的产品线都应该有一个应用框架来支撑。而应用框架自然是建立在基础框架之上。题目中的前端框架便是指基础框架加上应用框架

对于应用框架，交易线的Just、旺铺线的May都是很好的实践，也享受到了应用框架的好处

基于此，我希望fdev5能对各线建立应用框架提供帮助或指导，所以，fdev5不会有太多的代码，至少在初期是这样，更多的是一种思路，和一些解决问题的方案
